<% include top %>
<% include panel %>
<% include main %>
<span style="display: none;"><%=contacts%></span>



<form class="form-horizontal" action="">
    <fieldset aria-readonly="true">
    <div class="form-group">
        <label class="control-label col-sm-3" for="name">Name:</label>
        <div class="col-sm-4">
        <input type="text" class="form-control" id="name" readonly value="<%=data.name%>">
        </div>
    </div>
    <div class="form-group">
        <label class="control-label col-sm-3" for="phoneNum">Phone number:</label>
        <div class="col-sm-4">
        <input type="text" class="form-control" id="phoneNum" readonly value="<%=data.phone%>" >
        </div>
    </div>
    <div class="form-group">
        <label class="control-label col-sm-3" for="Balance">Balance:</label>
        <div class="col-sm-4">
            <input type="text" class="form-control" id="balance" readonly value="<%=data.balance%>" >
        </div>
        </div>
         <div class="form-group">
        <label class="control-label col-sm-3" for="">Points:</label>
        <div class="col-sm-4">
            <input type="text" class="form-control" id="points" readonly value="<%=data.points%>" >
        </div>
        </div>
        </fieldset>
</form> 
<div class="panel panel-default">
    <div class="panel-heading row">
        <div class="col-sm-8">Contacts</div>
        <div class="form-group col-sm-4">
            <input type="text" class="form-control" onkeyup="searchContact()" id="txtSearch" placeholder="Search">
       </div>
    </div>
   
</div>
<div class="panel-body" style="max-height: 400px;overflow-y: scroll;">
    <!-- Full table -->
      <table id="tblContact" class="table table-hover"  >
        <tr class="header" >
          <th >Short name</th>
          <th >Phone number</th>
          <th ></th>
          <th ></th>
         
        </tr>
        <% if(contacts.length>0){for (var i=0;i<contacts.length;i++){ %>
        <tr >
          
          <td><%=contacts[i].savedname%></td>
          <td><%=contacts[i].phone%></td>
          <td><button type="button" class="btn btn-default" data-toggle="modal" data-target="#myModala<%=i%>">Edit</button></td>
          <td><button type="button" class="btn btn-default" data-toggle="modal" data-target="#myModalb<%=i%>">Delete</button></td>
           <!-- Edit modal #1-->
          <div id="myModala<%=i%>" class="modal fade" role="dialog">
            <div class="modal-dialog">
          
              <!-- Modal content-->
              <form class="form" action="/editcontact" method="post">
              <div class="modal-content">
                <div class="modal-header">
                  <button type="button" class="close" data-dismiss="modal">&times;</button>
                  <h4 class="modal-title">Edit</h4>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label  for="">Name:</label>
                        
                          <input type="text" class="form-control" id="" name="name" value="<%=contacts[i].savedname%>">
                       
                      </div>
                      <div class="form-group">
                        <label  for="">Phone number:</label>
                        <input type="text" class="form-control" disabled value="<%=contacts[i].phone%>"  >
                        
                      </div>
                      <input type="hidden" value="<%=contacts[i].id%>" name="contactid">
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-default">Save</button>
                  <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
              </div>
            </form>
          
            </div>
          </div>
          <!-- Edit modal #2-->
          <div id="myModalb<%=i%>" class="modal fade" role="dialog">
            <div class="modal-dialog">
            <!-- Modal content-->
              <form class="form" action="/deletecontact" method="post">
              <div class="modal-content">
                <div class="modal-header">
                  <button type="button" class="close" data-dismiss="modal">&times;</button>
                  <h4 class="modal-title">Confirm deletion?</h4>
                </div>
                <div class="modal-body">
                  <p>Delete the selected contact?</p>
                  <input type="hidden" value="<%=contacts[i].id%>" name="contactid">
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-default">Yes</button>
                  <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                </div>
              </div>
            </form>
          
            </div>
          </div>
      
        </tr>
        <% }} %>
        
      </table>
      
</div>


</div>
</div>
</div>
</div>
<% include bottom %>